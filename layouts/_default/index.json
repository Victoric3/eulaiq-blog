{{- $posts := slice -}}
{{- range where .Site.RegularPages "Type" "posts" -}}
    {{- $featuredImage := "" -}}
    {{- with .Params.image -}}
        {{- $featuredImage = . | absURL -}}
    {{- end -}}
    {{- $post := dict
        "title" .Title
        "permalink" .Permalink
        "summary" ((.Summary | plainify) | truncate 150)
        "content" (.Plain | truncate 2000)
        "tags" .Params.tags
        "categories" .Params.categories
        "featuredImage" $featuredImage
    -}}
    {{- $posts = $posts | append $post -}}
{{- end -}}
{
    "posts": {{ $posts | jsonify }}
}